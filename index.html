<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ğŸ´â€â˜ ï¸ Bataille de Pirates</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="game-container">
        <!-- Ã‰cran d'accueil -->
        <div id="welcome-screen" class="screen active">
            <div class="skull-decoration">â˜ ï¸</div>
            <h1>Bataille de Pirates</h1>
            <p class="subtitle">PrÃ©parez vos canons, moussaillons!</p>
            <div class="mode-selection">
                <button id="start-local" class="pirate-btn">âš“ Partie Locale</button>
                <button id="start-online" class="pirate-btn">ğŸŒ Partie en Ligne</button>
            </div>
            <div class="ship-decoration">â›µ</div>
        </div>

        <!-- Ã‰cran de connexion en ligne -->
        <div id="online-screen" class="screen">
            <div class="skull-decoration">ğŸŒ</div>
            <h2>Mode En Ligne</h2>
            <div id="connection-form">
                <input type="text" id="player-name" class="pirate-input" placeholder="Votre nom de pirate..." maxlength="20">
                <input type="text" id="server-url" class="pirate-input" placeholder="URL du serveur" value="http://localhost:8080">
                <button id="connect-btn" class="pirate-btn">Se Connecter</button>
            </div>
            <div id="connection-status" class="hidden">
                <p id="status-message">Connexion...</p>
                <div class="spinner"></div>
            </div>
            <button id="back-to-menu" class="pirate-btn small">â† Retour</button>
        </div>

        <!-- Ã‰cran du lobby -->
        <div id="lobby-screen" class="screen">
            <h2>âš“ Lobby</h2>
            <div id="player-info">
                <p>Bienvenue, <span id="my-player-name">Pirate</span>!</p>
            </div>
            <div id="lobby-actions">
                <button id="join-queue-btn" class="pirate-btn">ğŸ² Matchmaking</button>
                <button id="leave-queue-btn" class="pirate-btn danger hidden">Quitter la file</button>
            </div>
            <div id="queue-status" class="hidden">
                <p id="queue-message">En attente d'un adversaire...</p>
                <div class="spinner"></div>
            </div>
            <div id="players-list-container">
                <h3>Joueurs disponibles:</h3>
                <div id="players-list"></div>
            </div>
            <button id="disconnect-btn" class="pirate-btn small danger">DÃ©connexion</button>
        </div>

        <!-- Ã‰cran de proposition de match -->
        <div id="match-proposal-screen" class="screen">
            <div class="skull-decoration">âš”ï¸</div>
            <h2>DÃ©fi!</h2>
            <p id="match-proposal-message">Un adversaire vous dÃ©fie!</p>
            <p id="match-opponent-name" class="opponent-name"></p>
            <p id="match-timeout" class="countdown"></p>
            <div class="match-actions">
                <button id="accept-match-btn" class="pirate-btn">âœ“ Accepter</button>
                <button id="reject-match-btn" class="pirate-btn danger">âœ— Refuser</button>
            </div>
        </div>

        <!-- Ã‰cran d'attente placement adversaire -->
        <div id="waiting-opponent-screen" class="screen">
            <div class="skull-decoration">â³</div>
            <h2>En attente...</h2>
            <p id="waiting-message">Votre adversaire place ses navires...</p>
            <div class="spinner"></div>
        </div>

        <!-- Ã‰cran de placement des bateaux -->
        <div id="placement-screen" class="screen">
            <h2>Capitaine <span id="placement-player">1</span></h2>
            <p class="instruction">Placez vos navires sur la grille</p>
            <div id="ship-selection">
                <div class="ship-to-place" data-size="5" data-name="Galion">
                    <span class="ship-icon">ğŸš¢</span> Galion (5)
                </div>
                <div class="ship-to-place" data-size="4" data-name="FrÃ©gate">
                    <span class="ship-icon">â›µ</span> FrÃ©gate (4)
                </div>
                <div class="ship-to-place" data-size="3" data-name="Brick">
                    <span class="ship-icon">ğŸ›¶</span> Brick (3)
                </div>
                <div class="ship-to-place" data-size="3" data-name="Corvette">
                    <span class="ship-icon">ğŸš¤</span> Corvette (3)
                </div>
                <div class="ship-to-place" data-size="2" data-name="Chaloupe">
                    <span class="ship-icon">ğŸš£</span> Chaloupe (2)
                </div>
            </div>
            <div class="controls">
                <button id="rotate-btn" class="pirate-btn small">â†» Tourner</button>
                <button id="reset-placement" class="pirate-btn small danger">Recommencer</button>
            </div>
            <div id="placement-grid" class="grid"></div>
            <button id="confirm-placement" class="pirate-btn" disabled>Confirmer la flotte</button>
        </div>

        <!-- Ã‰cran de transition -->
        <div id="transition-screen" class="screen">
            <div class="transition-content">
                <div class="skull-decoration big">â˜ ï¸</div>
                <h2 id="transition-message">Passez le tÃ©lÃ©phone au Capitaine 2</h2>
                <p class="countdown" id="countdown"></p>
                <button id="ready-btn" class="pirate-btn">Je suis prÃªt!</button>
            </div>
        </div>

        <!-- Ã‰cran de jeu (tir) -->
        <div id="game-screen" class="screen">
            <div class="game-header">
                <h2>Capitaine <span id="current-player">1</span></h2>
                <div id="power-indicator" class="hidden">
                    <span class="power-icon">âš¡</span>
                    <span id="power-name"></span>
                </div>
            </div>
            
            <div id="powers-panel">
                <h3>Pouvoirs disponibles:</h3>
                <div id="powers-list"></div>
            </div>

            <p class="instruction" id="game-instruction">Choisissez oÃ¹ tirer!</p>
            
            <div id="attack-grid" class="grid"></div>
            
            <div id="my-fleet-preview">
                <h4>Ma flotte:</h4>
                <div id="my-grid-small" class="grid small"></div>
            </div>
        </div>

        <!-- Ã‰cran de rÃ©sultat de tir -->
        <div id="result-screen" class="screen">
            <div id="result-content">
                <div id="result-icon"></div>
                <h2 id="result-title"></h2>
                <p id="result-message"></p>
                <div id="power-gained" class="hidden">
                    <div class="power-badge">
                        <span class="power-icon">âš¡</span>
                        <span id="power-gained-name"></span>
                    </div>
                    <p id="power-description"></p>
                </div>
            </div>
            <button id="continue-btn" class="pirate-btn">Continuer</button>
        </div>

        <!-- Ã‰cran de victoire -->
        <div id="victory-screen" class="screen">
            <div class="victory-content">
                <div class="trophy">ğŸ†</div>
                <h1>Victoire!</h1>
                <h2>Capitaine <span id="winner">1</span></h2>
                <p>a conquis les sept mers!</p>
                <div class="celebration">ğŸ‰ğŸ´â€â˜ ï¸ğŸ‰</div>
                <button id="new-game-btn" class="pirate-btn">Nouvelle bataille</button>
            </div>
        </div>
    </div>

    <script src="gameLogic.js"></script>
    <script type="module" src="dist/multiplayer.bundle.js"></script>
    <script src="game.js"></script>
</body>
</html>
